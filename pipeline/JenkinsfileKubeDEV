node {
    stage( 'Hello' ) {
        echo 'Hello to all'
        sh( 'env' )
        sh( 'set' )
    }

    stage( 'Checkout' ) {
        checkout scm
    }

    stage( 'Upadte vars' ) {
        sh( 'ls -la' )
        
        sh 'git rev-parse --abbrev-ref HEAD > GIT_BRANCH'
        git_branch = readFile('GIT_BRANCH').trim()
        echo git_branch

        sh 'git rev-parse HEAD > GIT_COMMIT'
        git_commit = readFile('GIT_COMMIT').trim()
        echo git_commit
    }
}